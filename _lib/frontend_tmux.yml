session_name: scotty
windows:
  - window_name: cmd
    panes:
      - pwd
  - window_name: frontend compilation
    layout: even-horizontal
    panes:
      - cd webapp; and yarn; and ./node_modules/.bin/ember serve --port 8000 --proxy http://127.0.0.1:8800
      - python manage.py testserver --no-tmux --port 8800
  - window_name: celery worker
    panes:
      - .env/bin/celery -A flask_app.tasks worker --loglevel=info --concurrency=1
      - .env/bin/celery -A flask_app.tasks shell
  - window_name: database
    panes:
      - pgcli scotty
  - window_name: transporter
    panes:
      - z transporter; and RUST_LOG=transporter=debug cargo run example/transporter.conf
  - window_name: redis
    panes:
      - bash -c "cd /tmp/ && rm -rf dump.rdb && exec redis-server"
